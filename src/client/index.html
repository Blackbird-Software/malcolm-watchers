<html>
<head>
    <script src="socket.io.js"></script>
    <script>
        const socket = io('http://localhost:3008', {'pingTimeout': 7000, 'pingInterval': 3000});
        socket.on('connect', async function () {
            console.log('Connected');

            socket.emit('register', {service: 'MOVIES', id: '123'}, function (response) {
                    console.log('Identity:', response);
                    return response;
                }
            );
        });
        socket.on('update', async function (data) {
            console.log('updated', data);
            document.getElementById("counter").innerHTML = data.amount + " connections";
        });
        socket.on('exception', function (data) {
            console.log('event', data);
        });
        socket.on('disconnect', async function () {
            console.log('Disconnected');

            // socket.emit('deregister', {service: 'MOVIES', id: '123'}, function (response) {
            //     console.log('Identity:', response);
            //     return response;
            // });
        });
    </script>
</head>
<body>
<span id="counter"></span>
</body>
</html>